(window["webpackJsonpmern-starter-client"]=window["webpackJsonpmern-starter-client"]||[]).push([[0],{182:function(e,t){var a={"fire wizard staff":{CRAFT_CHECK:function(e,t){return!(e.activeLevels().sorcery<20)&&!(t.filter(function(e){return"fire logs"===e.name}).length<20)},MODIFIER:function(e,t){}}};e.exports=a},183:function(e,t){var a={LIST:["mining","woodcutting","herding","stealth","magic","warfare"],magic:{ABILITIES:["level 1 charms","level 2 charms","start at 8","level 3 charms, level 1 wall charms","level 4 charms","start at 20","level 5 charms, level 2 wall charms","level 6 charms"]}};a.stealth={ABILITIES:["sneak","steal","start at 8","sense charm level?? I still like sense skill....you CANT do sense charm","sense abilities","start at 20","bug","start at 50"],CALCULATE_SNEAK:function(e,t,n){for(var r=e.getCharacters().reduce(function(e){return a.GET_LEVEL(e.experience.warfare)},0),o=e.kingdom.getCharacters().length/4*100,c=63/o,s=0,i=0;i<o&&!(i>r);i++)s+=c;if(n&&!t)return{percentGuarded:s};var l=70-s;if(l*=a.GET_LEVEL(t.experience.stealth)/100,n&&t)return{chance:l};var u=100*Math.random();return console.log(t.name+" "+t.family.name+" rolled a "+u+" on a stealth roll up against "+l+" percent chance at the "+e.name+" of "+e.kingdom.name),u<=l}},a.warfare={ABILITIES:["level 1 weapons","level 2 weapons","start at 8","level 3 weapons","level 4 weapons","start at 20","level 5 weapons","level 6 weapons"]},a.herding={ABILITIES:["Cow","deer","start at 8","horse","camel idfg","start at 20","pegasus","dragon "]},a.woodcutting={ABILITIES:["badwood","goodwood","start at 8","greatwood","ultrawood","start at 20","masterwood","Wood of the ancients"]},a.mining={ABILITIES:["rock","iron","start at 8","greenstone","bluestone","start at 20","redstone","agamandoon/badazite"]},a.GET_LEVEL=function(e){for(var t=0;t<this.LEVEL_CURVE.length;t++)if(e<this.LEVEL_CURVE[t])return t-1;return t},a.GET_ABILITIES=function(e,t){for(var a=[],n=0;n<this.ABILITY_CURVE.length;n++)t>this.ABILITY_CURVE[n]&&a.push(this[e].ABILITIES[n]);return a},a.LEVEL_CURVE=function(){for(var e,t=[0],a=1;a<=100;a++)t.push((e=a,100*Math.pow(e,1.8)/2));return t}.call(),a.ABILITY_CURVE=function(){for(var e,t=[0],a=1;a<8;a++)t.push((e=a,7200*Math.pow(2,e)));return t}.call(),e.exports=a},184:function(e,t){var a={};function n(e,t,a){return t.kingdom._id!==a.kingdom._id&&!a.compromised&&e}function r(e,t,a){return!(t.kingdom._id!==a.kingdom._id&&!a.compromised)&&e}a.SECONDS_PER_GRID=10,a.townCenter={DESCRIPTION:"A good place to chill and talk w ur team (look out for spies!)",FLAVOR:"some say papa bear was here a long time ago",CAPACITY:100,EVENTS:[n.bind(null,"invade"),r.bind(null,"craft"),r.bind(null,"equip"),n.bind(null,"sneak"),n.bind(null,"steal")],PRIVATE:!0,ACCESSIBLE:r.bind(null,!0),X_FROM_CENTER:0,Y_FROM_CENTER:0},a.gate={DESCRIPTION:"All the shit is here, craft items, get equipment",FLAVOR:"papa bear smells something cooking!",CAPACITY:100,EVENTS:[n.bind(null,"invade"),n.bind(null,"sneak"),r.bind("trainWarfare")],PRIVATE:!1,X_FROM_CENTER:2,Y_FROM_CENTER:2},a.royalChambers={DESCRIPTION:"Comfy! is that a nice velvet couch? (wehre the king stays)",FLAVOR:"The king of men resides here",CAPACITY:100,EVENTS:[],PRIVATE:!0,ACCESSIBLE:r.bind(null,!0),X_FROM_CENTER:-1,Y_FROM_CENTER:-1},a.quarry={DESCRIPTION:"This is where you mine",FLAVOR:"some say papa bear fell in here",CAPACITY:100,EVENTS:["mine"],PRIVATE:!1,X_FROM_CENTER:5,Y_FROM_CENTER:0},a.woods={DESCRIPTION:"A vast forest sits in front of you. You see a Wizards Tower poking out in the distance. These trees are a great place to hide....",FLAVOR:"some say papa bear LIVES here",CAPACITY:100,EVENTS:["woodcut","trainMagic","trainStealth"],PRIVATE:!1,X_FROM_CENTER:0,Y_FROM_CENTER:5},a.field={DESCRIPTION:"Theres is where you herd animals",FLAVOR:"some say papa bear feeds here",CAPACITY:100,EVENTS:["herd"],PRIVATE:!1,X_FROM_CENTER:5,Y_FROM_CENTER:5},e.exports=a},185:function(e,t){var a={};function n(e,t,a){return t.kingdom._id!==a.kingdom._id&&!a.dead&&e}a.EVENTS=[function(e,t,a){return t._id===a._id&&e}.bind(null,"unequip"),n.bind(null,"attack"),n.bind(null,"senseSkill"),n.bind(null,"senseCharm"),"senseBug",n.bind(null,"plantBug"),"record"],e.exports=a},187:function(e,t,a){e.exports=a(370)},358:function(e,t){},368:function(e,t,a){},369:function(e,t,a){},370:function(e,t,a){"use strict";a.r(t);var n={};a.r(n),a.d(n,"loginUser",function(){return ye}),a.d(n,"registerUser",function(){return Ee}),a.d(n,"login",function(){return Oe}),a.d(n,"resumeGame",function(){return je}),a.d(n,"register",function(){return we}),a.d(n,"selectCharacter",function(){return ke}),a.d(n,"registerCharacter",function(){return Ne}),a.d(n,"registerFamily",function(){return Ce}),a.d(n,"selectGame",function(){return Se}),a.d(n,"logoutUser",function(){return Pe}),a.d(n,"getForgotPasswordToken",function(){return Ie}),a.d(n,"resetPassword",function(){return _e}),a.d(n,"protectedTest",function(){return Le});var r={};a.r(r),a.d(r,"createCustomer",function(){return da}),a.d(r,"fetchCustomer",function(){return fa}),a.d(r,"cancelSubscription",function(){return ba}),a.d(r,"updateSubscription",function(){return va}),a.d(r,"updateBilling",function(){return ga});var o=a(0),c=a.n(o),s=a(176),i=a.n(s),l=a(8),u=a(16),m=a(7),p=a(178),h=a(12),d=a.n(h),f=a(2),b=a(3),v=a(5),g=a(4),y=a(6),E=function(e){function t(){return Object(f.a)(this,t),Object(v.a)(this,Object(g.a)(t).apply(this,arguments))}return Object(y.a)(t,e),Object(b.a)(t,[{key:"renderLinks",value:function(){return this.props.authenticated?[c.a.createElement("li",{key:"".concat(1,"header")},c.a.createElement(m.Link,{to:"/"},"Home")),c.a.createElement("li",{key:"".concat(2,"header")},c.a.createElement(m.Link,{to:"game"},"Game")),c.a.createElement("li",{key:"".concat(3,"header")},c.a.createElement(m.Link,{to:"logout"},"Logout"))]:[c.a.createElement("li",{key:1},c.a.createElement(m.Link,{to:"/"},"Home")),c.a.createElement("li",{key:2},c.a.createElement(m.Link,{to:"/login"},"Login")),c.a.createElement("li",{key:3},c.a.createElement(m.Link,{to:"/register"},"Register"))]}},{key:"render",value:function(){return c.a.createElement("div",null,c.a.createElement("nav",{className:"navbar navbar-default navbar-fixed-top"},c.a.createElement("div",{className:"container"},c.a.createElement("div",{className:"navbar-header"},c.a.createElement("button",{type:"button",className:"navbar-toggle collapsed","data-toggle":"collapse","data-target":"#nav-collapse"},c.a.createElement("span",{className:"icon-bar"}),c.a.createElement("span",{className:"icon-bar"}),c.a.createElement("span",{className:"icon-bar"})),c.a.createElement(m.Link,{className:"navbar-brand",to:"/"},this.props.logo)),c.a.createElement("div",{className:"collapse navbar-collapse",id:"nav-collapse"},c.a.createElement("ul",{className:"nav navbar-nav navbar-right"},this.renderLinks())))))}}]),t}(o.Component);var O=Object(l.connect)(function(e){return{authenticated:e.auth.authenticated}})(E),j=function(e){function t(){return Object(f.a)(this,t),Object(v.a)(this,Object(g.a)(t).apply(this,arguments))}return Object(y.a)(t,e),Object(b.a)(t,[{key:"renderLinks",value:function(){return this.props.authenticated?[c.a.createElement("li",{key:1},c.a.createElement(m.Link,{to:"/"},"Home")),c.a.createElement("li",{key:2},c.a.createElement(m.Link,{to:"dashboard"},"Dashboard")),c.a.createElement("li",{key:3},c.a.createElement(m.Link,{to:"logout"},"Logout"))]:[c.a.createElement("li",{key:1},c.a.createElement(m.Link,{to:"/"},"Home")),c.a.createElement("li",{key:2},c.a.createElement(m.Link,{to:"login"},"Login")),c.a.createElement("li",{key:3},c.a.createElement(m.Link,{to:"register"},"Register"))]}},{key:"render",value:function(){var e=(new Date).getFullYear();return c.a.createElement("footer",null,c.a.createElement("div",{className:"container"},c.a.createElement("div",{className:"row"},c.a.createElement("div",{className:"col-lg-12"},c.a.createElement("nav",null,c.a.createElement("ul",{className:"footer-nav"},this.renderLinks())),c.a.createElement("p",{className:"copyright"},"\xa9 ",e,", Your Site. All Rights Reserved.")))))}}]),t}(o.Component);Object(l.connect)(function(e){return{authenticated:e.auth.authenticated}},null)(j);var w=function(e){function t(){return Object(f.a)(this,t),Object(v.a)(this,Object(g.a)(t).apply(this,arguments))}return Object(y.a)(t,e),Object(b.a)(t,[{key:"render",value:function(){return c.a.createElement("div",null,c.a.createElement(O,{logo:"Papa Bear: All For King"}),c.a.createElement("div",{className:"container"},this.props.children))}}]),t}(o.Component),k=function(e){var t=function(t){function a(){return Object(f.a)(this,a),Object(v.a)(this,Object(g.a)(a).apply(this,arguments))}return Object(y.a)(a,t),Object(b.a)(a,[{key:"componentWillMount",value:function(){this.props.authenticated||this.context.router.push("/login")}},{key:"componentWillUpdate",value:function(e){e.authenticated||this.context.router.push("/login")}},{key:"render",value:function(){return c.a.createElement(e,this.props)}}]),a}(o.Component);return t.contextTypes={router:c.a.PropTypes.object},Object(l.connect)(function(e){return{authenticated:e.auth.authenticated}})(t)},N=function(e){function t(){return Object(f.a)(this,t),Object(v.a)(this,Object(g.a)(t).apply(this,arguments))}return Object(y.a)(t,e),Object(b.a)(t,[{key:"render",value:function(){return c.a.createElement("div",{className:"CharacterSummary"},"Character Summary View","Name: ",this.props.character.name+" "+this.props.character.family.name,"Kingdom: ",this.props.character.kingdom.name)}}]),t}(o.Component),C=function(e){function t(){return Object(f.a)(this,t),Object(v.a)(this,Object(g.a)(t).apply(this,arguments))}return Object(y.a)(t,e),Object(b.a)(t,[{key:"render",value:function(){if(!this.props.location)return c.a.createElement("div",null,"Loading...");var e=this.props.location;return c.a.createElement("div",{className:"LocationSummary"},"Location Summary View",e.name)}}]),t}(o.Component),S=function(e){function t(){return Object(f.a)(this,t),Object(v.a)(this,Object(g.a)(t).apply(this,arguments))}return Object(y.a)(t,e),Object(b.a)(t,[{key:"render",value:function(){return c.a.createElement("div",{className:"WorldSummary"},"World Summary View")}}]),t}(o.Component),P=(o.Component,function(e){function t(){return Object(f.a)(this,t),Object(v.a)(this,Object(g.a)(t).apply(this,arguments))}return Object(y.a)(t,e),Object(b.a)(t,[{key:"render",value:function(){return c.a.createElement("div",{onClick:this.props.goToSummary,className:"CharacterListItem"},this.props.character.name+" "+this.props.character.family.name)}}]),t}(o.Component)),I=(o.Component,function(e){function t(){return Object(f.a)(this,t),Object(v.a)(this,Object(g.a)(t).apply(this,arguments))}return Object(y.a)(t,e),Object(b.a)(t,[{key:"render",value:function(){return c.a.createElement("div",{style:{color:this.props.location.kingdom.color},onClick:this.props.select,className:"Location"},"Name: ".concat(this.props.location.name," Category: ").concat(this.props.location.category," Kingdom: ").concat(this.props.location.kingdom.name))}}]),t}(o.Component)),_=function(e){function t(){return Object(f.a)(this,t),Object(v.a)(this,Object(g.a)(t).apply(this,arguments))}return Object(y.a)(t,e),Object(b.a)(t,[{key:"render",value:function(){return c.a.createElement("div",{className:"Record"})}}]),t}(o.Component),L=function(e){function t(){return Object(f.a)(this,t),Object(v.a)(this,Object(g.a)(t).apply(this,arguments))}return Object(y.a)(t,e),Object(b.a)(t,[{key:"render",value:function(){return c.a.createElement("div",{className:"Message"},"".concat(this.props.message.author.name," ").concat(this.props.message.author.family.name,": ").concat(this.props.message.body))}}]),t}(o.Component),T=(o.Component,o.Component,a(20)),R=a(9),M=a(26),A=a.n(M),x="auth_user",F="unauth_user",D="auth_error",V="forgot_password_request",B="reset_password_request",Y="protected_test",X="fetch_user",U="fetch_conversations",W="fetch_recipients",z="start_conversation",G="fetch_single_conversation",q="chat_error",K="send_reply",H="send_contact_form",$="static_error",J="create_customer",Q="fetch_customer",Z="cancel_subscription",ee="update_billing",te="billing_error",ae="change_subscription",ne="game_error",re="event_success",oe="event_result",ce="event_close",se="event_open",ie="event_analyze",le="event_review",ue="give_event_local_props",me="set_player",pe="set_family",he="set_game",de=a(181),fe=a.n(de).a.connect("http://".concat(window.location.hostname,":3000")),be=a(75),ve=a.n(be),ge=be.id;function ye(e){var t=e.email,a=e.password;return function(e){return A.a.post("".concat(Te,"/auth/login"),{email:t,password:a}).then(function(t){d.a.save("token",t.data.token,{path:"/"}),d.a.save("user",t.data.user,{path:"/"}),e({type:x,payload:t.data})}).catch(function(t){Me(e,t.response,D)})}}function Ee(e){var t=e.email,a=e.firstName,n=e.lastName,r=e.password;return function(e){return A.a.post("".concat(Te,"/auth/register"),{email:t,firstName:a,lastName:n,password:r}).then(function(t){d.a.save("token",t.data.token,{path:"/"}),d.a.save("user",t.data.user,{path:"/"}),e({type:x,payload:t.data})}).catch(function(t){Me(e,t.response,D)})}}function Oe(e){return function(t,a){return t(ye(e)).then(function(){return t(je(e)).then(function(){window.location.href="".concat(Re,"/game")})})}}function je(e){return function(e,t){d.a.load("user").game;return e(Se()).then(function(){var t=d.a.load("user").currentCharacter;return e(ke({characterId:t}))})}}function we(e){return function(t,a){return t(Ee(e)).then(function(){return t(Se()).then(function(){return t(Ce({lastName:e.characterLastName})).then(function(){var a=d.a.load("user").family;return t(Ne({familyId:a,primary:!0,firstName:e.characterFirstName})).then(function(){var e=d.a.load("user").currentCharacter;return t(ke({characterId:e})).then(function(){return window.location.href="".concat(Re,"/game"),t})})})})})}}function ke(e){var t=e.characterId,a={characterId:t},n="/character/".concat(t,"/select");return function(e){return Ae(me,ne,!0,n,e,a)}}function Ne(e){e.primary;var t={name:e.firstName,family:e.familyId};return function(e){return Ae(me,ne,!0,"/character",e,t)}}function Ce(e){var t={name:e.lastName};return function(e){return Ae(pe,ne,!0,"/family",e,t)}}function Se(){var e={},t="/game/".concat(ge,"/select");return function(a){return Ae(he,ne,!0,t,a,e)}}function Pe(e){return function(t){t({type:F,payload:e||""}),d.a.remove("token",{path:"/"}),d.a.remove("user",{path:"/"}),window.location.href="".concat(Re,"/login")}}function Ie(e){var t=e.email;return function(e){A.a.post("".concat(Te,"/auth/forgot-password"),{email:t}).then(function(t){e({type:V,payload:t.data.message})}).catch(function(t){Me(e,t.response,D)})}}function _e(e,t){var a=t.password;return function(t){A.a.post("".concat(Te,"/auth/reset-password/").concat(e),{password:a}).then(function(e){t({type:B,payload:e.data.message}),m.browserHistory.push("/login")}).catch(function(e){Me(t,e.response,D)})}}function Le(){return function(e){A.a.get("".concat(Te,"/protected"),{headers:{Authorization:d.a.load("token")}}).then(function(t){e({type:Y,payload:t.data.content})}).catch(function(t){Me(e,t.response,D)})}}var Te="http://".concat(window.location.hostname,":3000/api"),Re="http://".concat(window.location.hostname,":8080");function Me(e,t,a){console.log("Error type: ",a),console.log(t);var n=t.response?t.response.data:t;if(401===t.status||401===t.response.status)return e(Pe(n="You are not authorized to do this."));e({type:a,payload:n})}function Ae(e,t,a,n,r,o){var c=Te+n,s={};return a&&(s={withCredentials:!0,headers:{Authorization:d.a.load("token")}}),A.a.post(c,o,s).then(function(t){t.data.user&&d.a.save("user",t.data.user,{path:"/"}),r({type:e,payload:t.data})}).catch(function(e){Me(r,e.response,t)})}function xe(e,t,a,n,r){var o=Te+n,c={};a&&(c={withCredentials:!0,headers:{Authorization:d.a.load("token")}}),A.a.get(o,c).then(function(t){r({type:e,payload:t.data})}).catch(function(e){Me(r,e.response,t)})}function Fe(e,t,a,n,r,o){var c=Te+n,s={};a&&(s={withCredentials:!0,headers:{Authorization:d.a.load("token")}}),A.a.put(c,o,s).then(function(t){r({type:e,payload:t.data})}).catch(function(e){Me(r,e.response,t)})}function De(e){var t=e;return function(e){e({type:ie,eventState:t})}}function Ve(e){return function(e){e({type:ce})}}function Be(e){return function(e){e({type:se})}}function Ye(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],a=e,n="/item/bug/".concat(e.itemId,"/plant");return function(r){if(t)return r(De(e));Ae(oe,ne,!0,n,r,a)}}function Xe(e){var t=e,a="/location/".concat(e.locationId,"/sneak");return function(e){Ae(oe,ne,!0,a,e,t)}}function Ue(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],a=e,n="/location/".concat(e.locationId,"/steal/").concat(e.itemId);return function(r){if(t)return r(De(e));Ae(oe,ne,!0,n,r,a)}}function We(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],a=e,n="/location/".concat(e.locationId,"/invade");return function(r){if(t)return r(De(e));Ae(oe,ne,!0,n,r,a)}}function ze(e){var t=e.body,a=e.location,n={body:t,location:a},r="/location/".concat(a._id,"/message");return function(e){Ae(re,ne,!0,r,e,n)}}function Ge(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],a=e;return function(n){if(t)return n(De(e));Ae(oe,ne,!0,"/character/{props.characterId}/attack",n,a)}}function qe(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],a=e,n="/character/".concat(e.characterId,"/sense/").concat(e.category);return function(r){if(t&&"bug"!==e.category)return r(De(e));Ae(oe,ne,!0,n,r,a)}}function Ke(e){var t=e,a="/character/".concat(e.characterId,"/message");return function(e){Ae(re,ne,!0,a,e,t),e(Object(R.d)("chatField"))}}function He(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,n)}return a}var $e=function(e){function t(){return Object(f.a)(this,t),Object(v.a)(this,Object(g.a)(t).apply(this,arguments))}return Object(y.a)(t,e),Object(b.a)(t,[{key:"handleClick",value:function(){this.props.onClick&&this.props.onClick(),this.props.giveEventLocalProps(this.props),this.props[this.props.event](this.props,!0)}},{key:"render",value:function(){var e=this.props.event,t=this.props.category,a=e;switch(e){case"travelToLocation":a="Travel here";break;case"senseCharacter":a="Sense "+t.substr(5).toLowerCase();break;case"createRoutine":switch(this.props.category){case"guard":a="Guard";break;case"herd":a="Herd animals";break;case"woodcut":a="Cut wood";break;case"mine":a="Mine ore";break;default:a="Train "+t.substr(5).toLowerCase()}}return c.a.createElement("div",{onClick:this.handleClick.bind(this)},a)}}]),t}(o.Component),Je={createRoutine:function(e){var t={location:e.location,category:e.category};return function(e){Ae(re,ne,!0,"/routine",e,t)}},startRoutine:function(e){var t=e,a="/routine/".concat(e.routineId,"/start");return function(e){Ae(re,ne,!0,a,e,t)}},endRoutine:function(e){var t=e,a="/routine/".concat(e.routineId,"/end");return function(e){Ae(re,ne,!0,a,e,t)}},openEventPopup:Be,closeEventPopup:Ve,giveEventLocalProps:function(e){var t=e;return function(e){e({type:ue,eventState:t})}},craftItem:function(e){var t=e;return function(e){Ae(re,ne,!0,"/item",e,t)}},plantBug:Ye,equipItem:function(e){var t=e,a="/item/".concat(e.itemId,"/equip");return function(e){Ae(re,ne,!0,a,e,t)}},unequipItem:function(e){var t=e,a="/item/".concat(e.itemId,"/unequip");return function(e){Ae(re,ne,!0,a,e,t)}},sneakThroughLocation:Xe,stealFromLocation:Ue,travelToLocation:function(e){var t=e.location._id,a={},n="/location/".concat(t,"/travel");return function(e){Ae(oe,ne,!0,n,e,a)}},invadeLocation:We,messageLocation:ze,attackCharacter:Ge,senseCharacter:qe,recordCharacter:function(e){var t=e,a="/character/".concat(e.characterId,"/record");return function(e){Ae(re,ne,!0,a,e,t)}},messageCharacter:Ke},Qe=Object(l.connect)(function(e,t){return function(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?He(a,!0).forEach(function(t){Object(T.a)(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):He(a).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}({},t)},Je)($e);function Ze(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,n)}return a}function et(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?Ze(a,!0).forEach(function(t){Object(T.a)(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):Ze(a).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}var tt=function(e){function t(e){var a;if(Object(f.a)(this,t),(a=Object(v.a)(this,Object(g.a)(t).call(this,e))).state={},"travelToLocation"===e.eventState.event){var n=Date.now()-e.eventState.travelStart;a.state.secondsRemaining=Math.ceil((e.eventState.travelTime-n)/1e3)-1}return a}return Object(y.a)(t,e),Object(b.a)(t,[{key:"tick",value:function(){this.setState({secondsRemaining:this.state.secondsRemaining-1}),this.state.secondsRemaining<=0&&clearInterval(this.interval)}},{key:"componentDidMount",value:function(){var e=this;"travelToLocation"===this.props.eventState.event&&(this.interval=setInterval(this.tick.bind(this),1e3),fe.on("arrived",function(){e.props.closeEventPopup()}))}},{key:"componentWillUnmount",value:function(){clearInterval(this.interval)}},{key:"confirm",value:function(){this.props[this.props.event](Object.assign({},this.state,this.props),!1)}},{key:"exit",value:function(){this.props.closeEventPopup()}},{key:"render_travelToLocation",value:function(){var e;return e=this.state.secondsRemaining>=1?"You will arrive @ ".concat(this.props.eventState.location.name," in ").concat(this.state.secondsRemaining," seconds"):"Arriving...",c.a.createElement("div",{className:"TravelToLocation"},e)}},{key:"render",value:function(){return c.a.createElement("div",{className:"EventPopup-container"},c.a.createElement("div",{className:"EventPopup"},this["render_"+this.props.eventState.event]()))}}]),t}(o.Component),at={openEventPopup:Be,closeEventPopup:Ve,plantBug:Ye,sneakThroughLocation:Xe,stealFromLocation:Ue,invadeLocation:We,attackCharacter:Ge,senseCharacter:qe},nt=Object(l.connect)(function(e,t){return et({},t,{eventState:et({},e.eventState,{},t.eventState)})},at)(tt),rt=a(49);function ot(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,n)}return a}var ct=function(e){function t(e){var a;return Object(f.a)(this,t),(a=Object(v.a)(this,Object(g.a)(t).call(this,e))).state={body:""},a._handleKeyDown=a._handleKeyDown.bind(Object(rt.a)(a)),a}return Object(y.a)(t,e),Object(b.a)(t,[{key:"_handleKeyDown",value:function(e){switch(e.keyCode){case 13:"location"===this.props.recipientModel?this.props.messageLocation({body:this.state.body,location:this.props.location}):"character"===this.props.recipientModel&&this.props.messageCharacter({body:this.state.body,location:this.props.character});var t=this.state;t.body="",this.setState(t)}}},{key:"updateBody",value:function(e){var t=this.state;t.body=e.target.value,this.setState(t)}},{key:"componentWillMount",value:function(){document.addEventListener("keydown",this._handleKeyDown)}},{key:"componentWillUnmount",value:function(){document.removeEventListener("keydown",this._handleKeyDown)}},{key:"render",value:function(){var e=this;return c.a.createElement("div",{className:"ChatInput"},c.a.createElement("input",{value:this.state.body,onChange:function(t){return e.updateBody(t)}}))}}]),t}(o.Component),st={messageLocation:ze,messageCharacter:Ke},it=Object(l.connect)(function(e,t){return function(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?ot(a,!0).forEach(function(t){Object(T.a)(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):ot(a).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}({},t)},st)(ct),lt=function(e){function t(){var e;return Object(f.a)(this,t),(e=Object(v.a)(this,Object(g.a)(t).call(this))).state={summaryView:"location",listView:"scene",selectedCharacter:null,selectedItem:null,selectedLocation:null,scene:[],relationship:[]},e}return Object(y.a)(t,e),Object(b.a)(t,[{key:"componentWillMount",value:function(){var e=this;fe.on("add to scene",function(t){var a=e.state;t.forEach(function(e){e.location?a.scene.push(e):e.recipient&&a.relationship.push(e)}),e.setState(a)}),fe.on("arrived",function(){var t=e.state;t.scene=[],e.setState(t),fe.emit("get scene")}),fe.on("joined game",function(){fe.emit("get scene")}),fe.authenticated?fe.emit("join game"):fe.on("authenticated",function(){fe.emit("join game")})}},{key:"goToCharacterSummary",value:function(e){var t=this.state;t.summaryView="character",t.listView="records",t.selectedCharacter=e,t.relationship=[],this.setState(t)}},{key:"goToWorldSummary",value:function(){var e=this.state;e.summaryView="world",e.listView="locations",this.setState(e)}},{key:"goToLocationSummary",value:function(){var e=this.state;e.summaryView="location",e.listView="scene",this.setState(e)}},{key:"selectLocation",value:function(e){var t=this.state;t.selectedLocation=e,this.setState(t)}},{key:"selectItem",value:function(e){var t=this.state;t.selectedItem=e,this.setState(t)}},{key:"goToListView",value:function(e){var t=this.state;t.listView=e,this.setState(t)}},{key:"render",value:function(){var e=this;if(!this.props.playerState&&!this.props.worldState)return c.a.createElement("div",null,"Loading...");var t,a,n=this.props.playerState,r=n.currentLocation,o=this.state.selectedCharacter,s=this.state.selectedItem,i=this.state.selectedLocation,l=this.props.worldState,u=this.state.scene,m=this.state.relationship;"location"===this.state.summaryView?(t=c.a.createElement(C,{location:r}),a=this.goToWorldSummary):"character"===this.state.summaryView?(t=c.a.createElement(N,{character:o}),a=this.goToLocationSummary):"world"===this.state.summaryView&&(t=c.a.createElement(S,this.props.worldState),a=this.goToLocationSummary);var p,h=[];"world"!==this.state.summaryView&&"character"!==this.state.summaryView&&(h=r.characters.map(function(t){return c.a.createElement(P,{goToSummary:e.goToCharacterSummary.bind(e,t),character:t})})),"locations"===this.state.listView&&(h=l.locations.map(function(t){return e.props.design.LOCATIONS[t.category].PRIVATE&&!e.props.design.LOCATIONS[t.category].ACCESSIBLE(e.props.playerState,t)?null:c.a.createElement(I,{select:e.selectLocation.bind(e,t),location:t})})),"scene"===this.state.listView&&(h="location"===this.state.summaryView?u.map(function(e){return"message"===e.category?c.a.createElement(L,{message:e}):"record"===e.category?c.a.createElement(_,{record:e}):void 0}):m.map(function(e){return c.a.createElement(L,{message:e})})),"location"===this.state.summaryView?p=c.a.createElement(it,{recipientModel:"location",location:r}):"character"===this.state.summaryView&&(p=c.a.createElement(it,{recipientModel:"character",location:o}));var d=[];return"world"===this.state.summaryView&&i&&d.push(c.a.createElement(Qe,{event:"travelToLocation",onClick:this.goToLocationSummary.bind(this),location:i})),"location"===this.state.summaryView&&r&&(d=this.props.design.LOCATIONS[r.category].EVENTS.map(function(e){switch(e.constructor==Function&&(e=e(n,r)),e){case"trainWarfare":case"trainStealth":case"trainMagic":case"guard":case"herd":case"woodcut":case"mine":return c.a.createElement(Qe,{event:"createRoutine",category:e,location:r});case"sneak":return c.a.createElement(Qe,{event:"sneakThroughLocation",location:r});case"steal":return c.a.createElement(Qe,{event:"stealFromLocation",location:r,item:s});case"invade":return c.a.createElement(Qe,{event:"invadeLocation",location:r});case"equip":return c.a.createElement(Qe,{event:"equipItem",item:s});case"craft":return c.a.createElement(Qe,{event:"craftItem",item:s})}})),"character"===this.state.summaryView&&o&&(d=this.props.design.CHARACTERS.EVENTS.map(function(e){switch(e.constructor==Function&&(e=e(n,o)),e){case"senseBug":case"senseSkill":case"senseCharm":return c.a.createElement(Qe,{event:"senseCharacter",category:e,character:o});case"attack":return c.a.createElement(Qe,{event:"attackCharacter",character:o});case"record":return c.a.createElement(Qe,{event:"recordCharacter",character:o});case"plantBug":return c.a.createElement(Qe,{event:"plantBug",character:o});case"unequip":return c.a.createElement(Qe,{event:"unequipItem",item:s})}})),c.a.createElement("div",{className:"GameCard"},c.a.createElement("div",{onClick:a.bind(this)}," ","< Go Back"),c.a.createElement("div",{className:"SummaryContainer"},t),c.a.createElement("div",{className:"ListContainer"},h),c.a.createElement("div",{className:"EventsContainer"},c.a.createElement("div",{className:"ChatInputContainer"},p),d))}}]),t}(o.Component),ut=function(e){function t(){return Object(f.a)(this,t),Object(v.a)(this,Object(g.a)(t).apply(this,arguments))}return Object(y.a)(t,e),Object(b.a)(t,[{key:"render",value:function(){return c.a.createElement("div",{className:"Game"},this.props.eventState.open?c.a.createElement(nt,this.props):null,c.a.createElement(lt,this.props))}}]),t}(o.Component);var mt=Object(l.connect)(function(e){return{kingdom:e.kingdom,player:e.game.player,game:e.game.game,family:e.game.family,playerState:e.game.playerState,worldState:e.game.worldState,eventState:e.eventState,design:e.game.design}})(ut),pt=c.a.createElement(m.Route,{path:"game"},c.a.createElement(m.IndexRoute,{component:mt})),ht=function(e){function t(){return Object(f.a)(this,t),Object(v.a)(this,Object(g.a)(t).apply(this,arguments))}return Object(y.a)(t,e),Object(b.a)(t,[{key:"render",value:function(){return c.a.createElement("div",null,c.a.createElement("h1",null,"404 - Page Not Found"),c.a.createElement("p",null,"I'm sorry, the page you were looking for cannot be found!"))}}]),t}(o.Component),dt=function(e){function t(){return Object(f.a)(this,t),Object(v.a)(this,Object(g.a)(t).apply(this,arguments))}return Object(y.a)(t,e),Object(b.a)(t,[{key:"render",value:function(){return c.a.createElement("div",null,"Hello world! This is the home page route.")}}]),t}(o.Component),ft=function(e){function t(){return Object(f.a)(this,t),Object(v.a)(this,Object(g.a)(t).apply(this,arguments))}return Object(y.a)(t,e),Object(b.a)(t,[{key:"handleFormSubmit",value:function(e){var t=e.firstName,a=e.lastName,n=e.emailAddress,r=e.subject,o=e.message;this.props.sendContactForm({firstName:t,lastName:a,emailAddress:n,subject:r,message:o})}},{key:"renderAlert",value:function(){if(this.props.errorMessage)return c.a.createElement("div",{className:"alert alert-danger"},c.a.createElement("strong",null,"Oops!")," ",this.props.errorMessage)}},{key:"renderMessage",value:function(){if(this.props.message)return c.a.createElement("div",{className:"alert alert-success"},c.a.createElement("strong",null,"Success!")," ",this.props.message)}},{key:"render",value:function(){var e=this.props,t=e.handleSubmit,a=e.fields,n=a.firstName,r=a.lastName,o=a.emailAddress,s=a.subject,i=a.message;return c.a.createElement("form",{onSubmit:t(this.handleFormSubmit.bind(this))},this.renderMessage(),c.a.createElement("div",{className:"row"},c.a.createElement("div",{className:"col-md-6"},c.a.createElement("fieldset",{className:"form-group"},c.a.createElement("label",null,"First Name"),c.a.createElement("input",Object.assign({},n,{className:"form-control"})))),c.a.createElement("div",{className:"col-md-6"},c.a.createElement("fieldset",{className:"form-group"},c.a.createElement("label",null,"Last Name"),c.a.createElement("input",Object.assign({},r,{className:"form-control"}))))),c.a.createElement("div",{className:"row"},c.a.createElement("div",{className:"col-md-12"},c.a.createElement("fieldset",{className:"form-group"},c.a.createElement("label",null,"Email Address"),c.a.createElement("input",Object.assign({},o,{className:"form-control"}))))),c.a.createElement("div",{className:"row"},c.a.createElement("div",{className:"col-md-12"},c.a.createElement("fieldset",{className:"form-group"},c.a.createElement("label",null,"Subject"),c.a.createElement("input",Object.assign({},s,{className:"form-control"}))))),c.a.createElement("div",{className:"row"},c.a.createElement("div",{className:"col-md-12"},c.a.createElement("fieldset",{className:"form-group"},c.a.createElement("label",null,"Message"),c.a.createElement("textarea",Object.assign({},i,{className:"form-control"}))))),this.renderAlert(),c.a.createElement("button",{action:"submit",className:"btn btn-primary"},"Send"))}}]),t}(o.Component);var bt=Object(R.c)({form:"contactForm",fields:["firstName","lastName","emailAddress","subject","message"]},function(e){return{errorMessage:e.communication.error,message:e.communication.message,authenticated:e.auth.authenticated}},{sendContactForm:function(e){var t=e.name,a=e.emailAddress,n=e.message;return function(e){A.a.post("".concat(Te,"/communication/contact"),{name:t,emailAddress:a,message:n}).then(function(t){e({type:H,payload:t.data.message})}).catch(function(t){Me(e,t.response,$)})}}})(ft),vt=function(e){function t(){return Object(f.a)(this,t),Object(v.a)(this,Object(g.a)(t).apply(this,arguments))}return Object(y.a)(t,e),Object(b.a)(t,[{key:"render",value:function(){var e={backgroundColor:this.props.color||"#5BC0DE",color:this.props.fontColor||"#FFF"};return c.a.createElement("div",{className:"pricing-table"},c.a.createElement("div",{className:"col-md-4 col-sm-6 col-xs-12 float-shadow"},c.a.createElement("div",{className:"price_table_container"},c.a.createElement("div",{className:"price_table_heading"},this.props.planName),c.a.createElement("div",{className:"price_table_body"},c.a.createElement("div",{className:"price_table_row cost",style:e},c.a.createElement("strong",null,this.props.price),c.a.createElement("span",null,"/MONTH")),this.props.features.map(function(e,t){return c.a.createElement("div",{key:"".concat(e,"-").concat(t),className:"price_table_row"},e)})),c.a.createElement(m.Link,{to:"checkout/".concat(this.props.planName.toLowerCase()),className:"btn btn-lg btn-block",style:e},"Subscribe!"))))}}]),t}(o.Component),gt=function(e){function t(){return Object(f.a)(this,t),Object(v.a)(this,Object(g.a)(t).apply(this,arguments))}return Object(y.a)(t,e),Object(b.a)(t,[{key:"render",value:function(){return c.a.createElement("div",{className:"social-bar"},c.a.createElement("ul",null,this.props.socialNetworks.map(function(e,t){return c.a.createElement("li",{key:"".concat(e,"-").concat(t),className:"social-icon"},c.a.createElement("a",{title:e.name,href:e.href},c.a.createElement("img",{alt:e.name,src:e.img})))})))}}]),t}(o.Component),yt=function(e){function t(){return Object(f.a)(this,t),Object(v.a)(this,Object(g.a)(t).apply(this,arguments))}return Object(y.a)(t,e),Object(b.a)(t,[{key:"render",value:function(){return c.a.createElement("div",{className:"slide"},this.props.selectedSlide.map(function(e,t){return c.a.createElement("div",{className:"rotator-item",key:"".concat(t,"-").concat(e.headline)},c.a.createElement("img",{className:"rotator-image",src:e.img}),e.headline?"<h3>".concat(e.headline,"</h3>"):"",c.a.createElement("div",{className:"rotator-text-container"},c.a.createElement("p",{className:"rotator-text"},e.text),c.a.createElement("p",{className:"rotator-author"},e.author)))}))}}]),t}(o.Component),Et=function(e){function t(){return Object(f.a)(this,t),Object(v.a)(this,Object(g.a)(t).apply(this,arguments))}return Object(y.a)(t,e),Object(b.a)(t,[{key:"renderNav",value:function(){for(var e=[],t=0;t<this.props.length;t++)e.push(c.a.createElement("li",{key:"".concat(t,"nav"),value:t,className:t==this.props.active?"slider-nav-bullet active":"slider-nav-bullet",onClick:this.props.setPage}));return e}},{key:"render",value:function(){return c.a.createElement("ul",null,this.renderNav())}}]),t}(o.Component),Ot=function(e){function t(e){var a;return Object(f.a)(this,t),(a=Object(v.a)(this,Object(g.a)(t).call(this,e))).setPage=a.setPage.bind(Object(rt.a)(a)),a.state={index:0},a}return Object(y.a)(t,e),Object(b.a)(t,[{key:"setPage",value:function(e){this.setState({index:e.target.value})}},{key:"render",value:function(){var e=this.props.rotators.filter(function(e,t){return t==this.state.index},this);return c.a.createElement("div",{className:"rotator-container"},c.a.createElement(yt,{selectedSlide:e}),c.a.createElement(Et,{length:this.props.rotators.length,active:this.state.index,setPage:this.setPage}))}}]),t}(o.Component),jt=["Really cool","Pretty cheap","Awesome"],wt=["A couple features","Pretty neat"],kt=["A bit cooler yet"],Nt=[{name:"Facebook",href:"http://facebook.com/",img:"http://localhost:8080/src/public/img/icons/facebook.svg"},{name:"Twitter",href:"http://twitter.com/",img:"http://localhost:8080/src/public/img/icons/twitter.svg"}],Ct=[{img:"",headline:"",text:"I love React!",author:"JS"},{img:"",headline:"",text:"MERN stack is pretty cool.",author:"DM"}],St=function(e){function t(){return Object(f.a)(this,t),Object(v.a)(this,Object(g.a)(t).apply(this,arguments))}return Object(y.a)(t,e),Object(b.a)(t,[{key:"render",value:function(){return c.a.createElement("div",{className:"select-plan"},c.a.createElement("div",{className:"row"},c.a.createElement(vt,{planName:"Bronze",color:"#CCC",price:"$10",features:jt}),c.a.createElement(vt,{planName:"Silver",price:"$15",features:wt}),c.a.createElement(vt,{planName:"Gold",price:"$20",features:kt})),c.a.createElement(gt,{socialNetworks:Nt}),c.a.createElement(Ot,{rotators:Ct}))}}]),t}(o.Component),Pt=Object(R.c)({form:"register",validate:function(e){var t={};e.firstName||(t.firstName="Please enter a first name");e.lastName||(t.lastName="Please enter a last name");e.email||(t.email="Please enter an email");e.password||(t.password="Please enter a password");return t}}),It=function(e){return c.a.createElement("div",null,c.a.createElement("input",Object.assign({className:"form-control"},e.input)),e.touched&&e.error&&c.a.createElement("div",{className:"error"},e.error))};var _t=function(e){function t(){return Object(f.a)(this,t),Object(v.a)(this,Object(g.a)(t).apply(this,arguments))}return Object(y.a)(t,e),Object(b.a)(t,[{key:"handleFormSubmit",value:function(e){this.props.register(e)}},{key:"renderAlert",value:function(){if(this.props.errorMessage)return c.a.createElement("div",null,c.a.createElement("span",null,c.a.createElement("strong",null,"Error!")," ",this.props.errorMessage))}},{key:"render",value:function(){var e=this.props.handleSubmit;return c.a.createElement("form",{onSubmit:e(this.handleFormSubmit.bind(this))},this.renderAlert(),c.a.createElement("div",{className:"row"},"User:",c.a.createElement("div",{className:"col-md-6"},c.a.createElement("label",null,"First Name"),c.a.createElement(R.a,{name:"firstName",className:"form-control",component:It,type:"text"})),c.a.createElement("div",{className:"col-md-6"},c.a.createElement("label",null,"Last Name"),c.a.createElement(R.a,{name:"lastName",className:"form-control",component:It,type:"text"}))),c.a.createElement("div",{className:"row"},c.a.createElement("div",{className:"col-md-12"},c.a.createElement("label",null,"Email"),c.a.createElement(R.a,{name:"email",className:"form-control",component:It,type:"text"}))),c.a.createElement("div",{className:"row"},c.a.createElement("div",{className:"col-md-12"},c.a.createElement("label",null,"Password"),c.a.createElement(R.a,{name:"password",className:"form-control",component:It,type:"password"}))),c.a.createElement("div",{className:"row"},"Character:",c.a.createElement("div",{className:"col-md-6"},c.a.createElement("label",null,"First Name"),c.a.createElement(R.a,{name:"characterFirstName",className:"form-control",component:It,type:"text"})),c.a.createElement("div",{className:"col-md-6"},c.a.createElement("label",null,"Last Name"),c.a.createElement(R.a,{name:"characterLastName",className:"form-control",component:It,type:"text"}))),c.a.createElement("button",{type:"submit",className:"btn btn-primary"},"Register"))}}]),t}(o.Component);var Lt=Object(l.connect)(function(e){return{errorMessage:e.auth.error,message:e.auth.message,authenticated:e.auth.authenticated}},{register:we})(Pt(_t)),Tt=Object(R.c)({form:"login"}),Rt=function(e){function t(){return Object(f.a)(this,t),Object(v.a)(this,Object(g.a)(t).apply(this,arguments))}return Object(y.a)(t,e),Object(b.a)(t,[{key:"handleFormSubmit",value:function(e){this.props.login(e)}},{key:"renderAlert",value:function(){if(this.props.errorMessage)return c.a.createElement("div",null,c.a.createElement("span",null,c.a.createElement("strong",null,"Error!")," ",this.props.errorMessage))}},{key:"render",value:function(){var e=this.props.handleSubmit;return c.a.createElement("div",null,c.a.createElement("form",{onSubmit:e(this.handleFormSubmit.bind(this))},this.renderAlert(),c.a.createElement("div",null,c.a.createElement("label",null,"Email"),c.a.createElement(R.a,{name:"email",className:"form-control",component:"input",type:"text"})),c.a.createElement("div",null,c.a.createElement("label",null,"Password"),c.a.createElement(R.a,{name:"password",className:"form-control",component:"input",type:"password"})),c.a.createElement("button",{type:"submit",className:"btn btn-primary"},"Login")),c.a.createElement(m.Link,{to:"/forgot-password"},"Forgot Password?"))}}]),t}(o.Component);var Mt=Object(l.connect)(function(e){return{errorMessage:e.auth.error,message:e.auth.message,authenticated:e.auth.authenticated}},{login:Oe})(Tt(Rt)),At=function(e){function t(){return Object(f.a)(this,t),Object(v.a)(this,Object(g.a)(t).apply(this,arguments))}return Object(y.a)(t,e),Object(b.a)(t,[{key:"componentWillMount",value:function(){this.props.logoutUser()}},{key:"render",value:function(){return c.a.createElement("div",null,"Sorry to see you go!")}}]),t}(o.Component),xt=Object(l.connect)(null,n)(At),Ft=Object(R.c)({form:"forgotPassword"}),Dt=function(e){function t(){return Object(f.a)(this,t),Object(v.a)(this,Object(g.a)(t).apply(this,arguments))}return Object(y.a)(t,e),Object(b.a)(t,[{key:"componentWillMount",value:function(){this.props.authenticated&&this.context.router.push("/dashboard")}},{key:"componentWillUpdate",value:function(e){e.authenticated&&this.context.router.push("/dashboard")}},{key:"handleFormSubmit",value:function(e){this.props.getForgotPasswordToken(e)}},{key:"renderAlert",value:function(){if(this.props.errorMessage)return c.a.createElement("div",null,c.a.createElement("span",null,c.a.createElement("strong",null,"Error!")," ",this.props.errorMessage))}},{key:"render",value:function(){var e=this.props.handleSubmit;return c.a.createElement("form",{onSubmit:e(this.handleFormSubmit.bind(this))},c.a.createElement("div",null,this.renderAlert(),c.a.createElement("label",null,"Email"),c.a.createElement(R.a,{name:"email",className:"form-control",component:"input",type:"text"})),c.a.createElement("button",{type:"submit",className:"btn btn-primary"},"Reset Password"))}}]),t}(o.Component);Dt.contextTypes={router:c.a.PropTypes.object};var Vt=Object(l.connect)(function(e){return{errorMessage:e.auth.error,message:e.auth.message,authenticated:e.auth.authenticated}},{getForgotPasswordToken:Ie})(Ft(Dt)),Bt=Object(R.c)({form:"resetPassword",validate:function(e){var t={};e.password||(t.password="Please enter a new password");e.passwordConfirm||(t.passwordConfirm="Please confirm new password");e.password!==e.passwordConfirm&&(t.password="Passwords must match");return t}});var Yt=function(e){return c.a.createElement("div",null,c.a.createElement("input",Object.assign({className:"form-control"},e.input)),e.touched&&e.error&&c.a.createElement("div",{className:"error"},e.error))},Xt=function(e){function t(){return Object(f.a)(this,t),Object(v.a)(this,Object(g.a)(t).apply(this,arguments))}return Object(y.a)(t,e),Object(b.a)(t,[{key:"componentWillMount",value:function(){this.props.authenticated&&this.context.router.push("/dashboard")}},{key:"componentWillUpdate",value:function(e){e.authenticated&&this.context.router.push("/dashboard")}},{key:"handleFormSubmit",value:function(e){var t=e.password,a=this.props.params.resetToken;this.props.resetPassword(a,{password:t})}},{key:"renderAlert",value:function(){return this.props.errorMessage?c.a.createElement("div",{className:"alert alert-danger"},c.a.createElement("strong",null,"Oops!")," ",this.props.errorMessage):this.props.message?c.a.createElement("div",{className:"alert alert-success"},c.a.createElement("strong",null,"Success!")," ",this.props.message):void 0}},{key:"render",value:function(){var e=this.props.handleSubmit,t=this.state.passwordConfirm;return c.a.createElement("form",{onSubmit:e(this.handleFormSubmit.bind(this))},c.a.createElement("fieldset",{className:"form-group"},c.a.createElement("label",null,"New Password:"),c.a.createElement(R.a,{name:"password",component:Yt,type:"password"})),c.a.createElement("fieldset",{className:"form-group"},c.a.createElement("label",null,"Confirm New Password:"),c.a.createElement(R.a,{name:"passwordConfirm",component:Yt,type:"password"}),t.touched&&t.error&&c.a.createElement("div",{className:"error"},t.error)),this.renderAlert(),c.a.createElement("button",{action:"submit",className:"btn btn-primary"},"Change Password"))}}]),t}(o.Component);Xt.contextTypes={router:c.a.PropTypes.object};var Ut=Object(l.connect)(function(e){return{errorMessage:e.auth.error,message:e.auth.resetMessage}},{resetPassword:_e})(Bt(Xt)),Wt=function(e){function t(e){var a;return Object(f.a)(this,t),(a=Object(v.a)(this,Object(g.a)(t).call(this,e))).props.protectedTest(),a}return Object(y.a)(t,e),Object(b.a)(t,[{key:"isRole",value:function(e,t){return d.a.load("user").role==e&&t}},{key:"adminMenu",value:function(){return c.a.createElement("div",{className:"admin-menu"},c.a.createElement(m.Link,{to:"/admin"},"Admin"))}},{key:"ownerMenu",value:function(){return c.a.createElement("div",{className:"trainer-menu"},"Owner menu coming soon.")}},{key:"clientMenu",value:function(){return c.a.createElement("div",{className:"client-menu"},"Client menu coming soon.")}},{key:"render",value:function(){return c.a.createElement("div",null,c.a.createElement(m.Link,{to:"/dashboard/inbox"},"Inbox")," | ",c.a.createElement(m.Link,{to:"/profile/edit"},"Edit Profile")," | ",c.a.createElement(m.Link,{to:"/billing/settings"},"Billing"),this.isRole("Admin",this.adminMenu()),this.isRole("Owner",this.ownerMenu()),this.isRole("Client",this.clientMenu()),c.a.createElement("p",null,this.props.content))}}]),t}(o.Component);var zt=Object(l.connect)(function(e){return{content:e.auth.content}},{protectedTest:Le})(Wt),Gt=function(e){function t(){return Object(f.a)(this,t),Object(v.a)(this,Object(g.a)(t).apply(this,arguments))}return Object(y.a)(t,e),Object(b.a)(t,[{key:"render",value:function(){return c.a.createElement("div",null,this.props.profile)}}]),t}(o.Component),qt=function(e){function t(){return Object(f.a)(this,t),Object(v.a)(this,Object(g.a)(t).apply(this,arguments))}return Object(y.a)(t,e),Object(b.a)(t,[{key:"componentWillMount",value:function(){var e=d.a.load("uid");this.props.fetchUser(e)}},{key:"render",value:function(){return c.a.createElement(Gt,{profile:this.props.profile.email})}}]),t}(o.Component);var Kt=Object(l.connect)(function(e){return{profile:e.user.profile}},{fetchUser:function(e){return function(t){A.a.get("".concat(Te,"/user/").concat(e),{headers:{Authorization:d.a.load("token")}}).then(function(e){t({type:X,payload:e.data.user})}).catch(function(e){return t(Me(e.data.error))})}}})(qt);var Ht=function(e){function t(){return Object(f.a)(this,t),Object(v.a)(this,Object(g.a)(t).apply(this,arguments))}return Object(y.a)(t,e),Object(b.a)(t,[{key:"render",value:function(){return c.a.createElement("div",{className:"message"},c.a.createElement("a",{href:"/dashboard/conversation/view/".concat(this.props.conversationId)},c.a.createElement("span",{className:"message-body"},this.props.message),c.a.createElement("br",null),c.a.createElement("span",{className:"message-byline"},"From ",this.props.author," | ",this.props.timestamp)))}}]),t}(o.Component),$t=a(107),Jt=function(e){function t(e){var a;return Object(f.a)(this,t),(a=Object(v.a)(this,Object(g.a)(t).call(this,e))).userCookie=d.a.load("user"),a}return Object(y.a)(t,e),Object(b.a)(t,[{key:"render",value:function(){this.userCookie._id;return c.a.createElement("div",{className:"messages"},this.props.conversations.map(function(e){return e.map(function(e){return c.a.createElement(Ht,{key:e._id,message:e.body,authorId:e.author._id,conversationId:e.conversationId,author:"".concat(e.author.profile.firstName," ").concat(e.author.profile.lastName.substring(0,1),"."),timestamp:$t(e.createdAt).from($t())})})}))}}]),t}(o.Component),Qt=function(e){function t(){return Object(f.a)(this,t),Object(v.a)(this,Object(g.a)(t).apply(this,arguments))}return Object(y.a)(t,e),Object(b.a)(t,[{key:"componentWillMount",value:function(){this.props.fetchConversations()}},{key:"renderInbox",value:function(){return this.props.conversations&&this.props.conversations.length>0?c.a.createElement(Jt,{conversations:this.props.conversations}):c.a.createElement("div",null,"You do not have any active conversations.")}},{key:"render",value:function(){return c.a.createElement("div",null,c.a.createElement(m.Link,{className:"btn btn-primary",to:"/dashboard/conversation/new"},"Compose Message"),c.a.createElement("div",{className:"panel panel-default"},c.a.createElement("div",{className:"panel-body"},this.renderInbox())))}}]),t}(o.Component);var Zt=Object(l.connect)(function(e){return{conversations:e.communication.conversations}},{fetchConversations:function(){return function(e){return xe(U,q,!0,"/chat",e)}}})(Qt),ea=d.a.load("user"),ta=function(e){function t(){return Object(f.a)(this,t),Object(v.a)(this,Object(g.a)(t).apply(this,arguments))}return Object(y.a)(t,e),Object(b.a)(t,[{key:"render",value:function(){return c.a.createElement("div",{className:ea==this.props.author._id?"message current-user":"message"},c.a.createElement("span",{className:"message-body"},this.props.message),c.a.createElement("br",null),c.a.createElement("span",{className:"message-byline"},"From ",this.props.author.profile.firstName," ",this.props.author.profile.lastName," | ",this.props.timestamp))}}]),t}(o.Component),aa=a(107),na=function(e){function t(){return Object(f.a)(this,t),Object(v.a)(this,Object(g.a)(t).apply(this,arguments))}return Object(y.a)(t,e),Object(b.a)(t,[{key:"render",value:function(){return c.a.createElement("div",{className:"messages"},this.props.displayMessages.map(function(e){return c.a.createElement(ta,{key:e._id,message:e.body,author:e.author,timestamp:aa(e.createdAt).from(aa())})}))}}]),t}(o.Component),ra=Object(R.c)({form:"replyMessage"}),oa=function(e){return c.a.createElement("div",null,c.a.createElement("input",Object.assign({className:"form-control",autoComplete:"off"},e.input)))},ca=function(e){function t(){return Object(f.a)(this,t),Object(v.a)(this,Object(g.a)(t).apply(this,arguments))}return Object(y.a)(t,e),Object(b.a)(t,[{key:"handleFormSubmit",value:function(e){this.props.sendReply(this.props.replyTo,e)}},{key:"renderAlert",value:function(){return this.props.errorMessage?c.a.createElement("div",{className:"alert alert-danger"},c.a.createElement("strong",null,"Oops!")," ",this.props.errorMessage):this.props.message?c.a.createElement("div",{className:"alert alert-success"},c.a.createElement("strong",null,"Success!")," ",this.props.message):void 0}},{key:"render",value:function(){var e=this.props.handleSubmit;return c.a.createElement("form",{onSubmit:e(this.handleFormSubmit.bind(this))},this.renderAlert(),c.a.createElement(R.a,{name:"composedMessage",className:"form-control",component:oa,type:"text",placeholder:"Type here to chat..."}),c.a.createElement("button",{action:"submit",className:"btn btn-primary"},"Send"))}}]),t}(o.Component);var sa=Object(l.connect)(function(e){return{recipients:e.communication.recipients,errorMessage:e.communication.error}},{sendReply:function(e,t){var a={composedMessage:t.composedMessage},n="/chat/".concat(e);return function(t){Ae(K,q,!0,n,t,a),t(Object(R.d)("replyMessage")),fe.emit("new message",e)}}})(ra(ca)),ia=function(e){function t(e){var a;Object(f.a)(this,t);var n=(a=Object(v.a)(this,Object(g.a)(t).call(this,e))).props,r=n.params,o=n.fetchConversation;return o(r.conversationId),fe.emit("enter conversation",r.conversationId),fe.on("refresh messages",function(e){o(r.conversationId)}),a}return Object(y.a)(t,e),Object(b.a)(t,[{key:"componentWillUnmount",value:function(){fe.emit("leave conversation",this.props.params.conversationId)}},{key:"renderInbox",value:function(){if(this.props.messages)return c.a.createElement(na,{displayMessages:this.props.messages})}},{key:"render",value:function(){return c.a.createElement("div",null,c.a.createElement("div",{className:"panel panel-default"},c.a.createElement("div",{className:"panel-body"},c.a.createElement("h4",{className:"left"},"Conversation with ",this.props.params.conversationId),c.a.createElement(m.Link,{className:"right",to:"/dashboard/inbox"},"Back to Inbox"),c.a.createElement("div",{className:"clearfix"}),this.renderInbox())),c.a.createElement(sa,{replyTo:this.props.params.conversationId}))}}]),t}(o.Component);var la=Object(l.connect)(function(e){return{messages:e.communication.messages}},{fetchConversation:function(e){var t="/chat/".concat(e);return function(e){return xe(G,q,!0,t,e)}}})(ia),ua=Object(R.c)({form:"composeMessage",validate:function(e){var t={};e.composedMessage||(t.password="Please enter a message");return t}});var ma=function(e){return c.a.createElement("div",null,c.a.createElement("input",Object.assign({className:"form-control",autoComplete:"off"},e.input)),e.touched&&e.error&&c.a.createElement("div",{className:"error"},e.error))},pa=function(e){function t(e){var a;return Object(f.a)(this,t),(a=Object(v.a)(this,Object(g.a)(t).call(this,e))).props.fetchRecipients(),a}return Object(y.a)(t,e),Object(b.a)(t,[{key:"handleFormSubmit",value:function(e){this.props.startConversation(e)}},{key:"renderRecipients",value:function(){if(this.props.recipients)return this.props.recipients.map(function(e){return c.a.createElement("option",{key:e._id,value:e._id},e.profile.firstName," ",e.profile.lastName)})}},{key:"renderAlert",value:function(){return this.props.errorMessage?c.a.createElement("div",{className:"alert alert-danger"},c.a.createElement("strong",null,"Oops!")," ",this.props.errorMessage):this.props.message?c.a.createElement("div",{className:"alert alert-success"},c.a.createElement("strong",null,"Success!")," ",this.props.message):void 0}},{key:"render",value:function(){var e=this.props.handleSubmit;return c.a.createElement("form",{onSubmit:e(this.handleFormSubmit.bind(this))},c.a.createElement("h2",null,"Start New Conversation"),c.a.createElement(R.a,{className:"form-control",name:"recipient",component:"select"},c.a.createElement("option",null),this.renderRecipients()),c.a.createElement("label",null,"Enter your message below"),this.renderAlert(),c.a.createElement(R.a,{name:"composedMessage",component:ma,type:"text",placeholder:"Type here to chat..."}),c.a.createElement("button",{action:"submit",className:"btn btn-primary"},"Send"))}}]),t}(o.Component);var ha=Object(l.connect)(function(e){return{recipients:e.communication.recipients,errorMessage:e.communication.error}},{fetchRecipients:function(){return function(e){return xe(W,q,!0,"/chat/recipients",e)}},startConversation:function(e){var t=e.recipient,a={composedMessage:e.composedMessage},n="/chat/new/".concat(t);return function(e){Ae(z,q,!0,n,e,a),e(Object(R.d)("composeMessage")),m.browserHistory.push("/dashboard/conversation/view/".concat(a.conversationId))}}})(ua(pa));function da(e,t,a){var n={stripeToken:e,plan:t,lastFour:a};return function(e){return Ae(J,te,!0,"/pay/customer",e,n)}}function fa(){return function(e){return xe(Q,te,!0,"/pay/customer",e)}}function ba(){return function(e){return xe(Z,te,!0,"/pay/customer",e)}}function va(e){var t={newPlan:e};return function(e){return Fe(ae,te,!0,"/pay/subscription",e,t)}}function ga(e){var t={stripeToken:e};return function(e){return Fe(ee,te,!0,"/pay/customer",e,t)}}var ya=function(e){function t(){return Object(f.a)(this,t),Object(v.a)(this,Object(g.a)(t).apply(this,arguments))}return Object(y.a)(t,e),Object(b.a)(t,[{key:"render",value:function(){return c.a.createElement("form",{onSubmit:this.props.onSubmit.bind(this.value)},c.a.createElement("div",{className:"row"},c.a.createElement("div",{className:"col-md-9"},c.a.createElement("label",null,"Card Number"),c.a.createElement("input",{id:"cardNumber",className:"form-control",onChange:this.props.handleChange.bind(this.value),value:this.props.formState.cardNumber,autoComplete:"off"})),c.a.createElement("div",{className:"col-md-3"},c.a.createElement("label",null,"CVC"),c.a.createElement("input",{id:"cvc",className:"form-control",onChange:this.props.handleChange.bind(this.value),value:this.props.formState.cvc,autoComplete:"off"}))),c.a.createElement("div",{className:"row"},c.a.createElement("div",{className:"col-md-6"},c.a.createElement("label",null,"Expiration Month (MM)"),c.a.createElement("input",{id:"expMonth",className:"form-control",onChange:this.props.handleChange.bind(this.value),value:this.props.formState.expMonth,autoComplete:"off"})),c.a.createElement("div",{className:"col-md-6"},c.a.createElement("label",null,"Expiration Year (YYYY)"),c.a.createElement("input",{id:"expYear",className:"form-control",onChange:this.props.handleChange.bind(this.value),value:this.props.formState.expYear,autoComplete:"off"}))),c.a.createElement("button",{type:"submit",className:"btn btn-primary"},"Get Started!"))}}]),t}(o.Component),Ea=function(e){function t(e){var a;return Object(f.a)(this,t),(a=Object(v.a)(this,Object(g.a)(t).call(this,e))).state={stripePublicKey:"pk_test_XXXXXXXXXXXXXXXXXXXXXXXX",cardNumber:"",expMonth:"",expYear:"",cvc:"",error:""},a}return Object(y.a)(t,e),Object(b.a)(t,[{key:"componentWillMount",value:function(){this.loadStripe()}},{key:"loadStripe",value:function(){if(!document.getElementById("stripe-import")){var e=document.createElement("script");e.id="stripe-import",e.src="https://js.stripe.com/v2/",e.type="text/javascript",e.async=!0,document.body.appendChild(e)}}},{key:"handleFormChange",value:function(e){switch(e.preventDefault(),e.target.id){case"cardNumber":return this.setState({cardNumber:e.target.value});case"cvc":return this.setState({cvc:e.target.value});case"expMonth":return this.setState({expMonth:e.target.value});case"expYear":return this.setState({expYear:e.target.value})}}},{key:"handleSubmit",value:function(e){e.preventDefault();var t=this;t.setState({error:""}),window.Stripe.setPublishableKey(this.state.stripePublicKey),window.Stripe.card.createToken({number:this.state.cardNumber,cvc:this.state.cvc,exp_month:this.state.expMonth,exp_year:this.state.expYear},function(e,a){if(a.error)t.setState({error:a.error});else{var n=t.props.plan,r=a.id,o=a.card.last4;n?t.props.createCustomer(r,n,o):t.props.updateBilling(r)}})}},{key:"render",value:function(){return c.a.createElement("div",{className:"checkout-form"},this.state.error.message,c.a.createElement(ya,{handleChange:this.handleFormChange.bind(this),onSubmit:this.handleSubmit.bind(this),formState:this.state}))}}]),t}(o.Component),Oa=Object(l.connect)(null,r)(Ea),ja=a(107),wa=function(e){function t(e){var a;return Object(f.a)(this,t),(a=Object(v.a)(this,Object(g.a)(t).call(this,e))).props.fetchCustomer(),a.state={cancelConfirm:!1,changeSubscription:!1,updateBilling:!1,newPlan:""},a}return Object(y.a)(t,e),Object(b.a)(t,[{key:"handlePlanChange",value:function(e){this.setState({newPlan:e.target.value})}},{key:"changePlanSubmit",value:function(){this.props.updateSubscription(this.state.newPlan)}},{key:"renderAlert",value:function(){return this.props.errorMessage?c.a.createElement("div",{className:"alert alert-danger"},c.a.createElement("strong",null,"Oops!")," ",this.props.errorMessage):this.props.message?c.a.createElement("div",{className:"alert alert-success"},c.a.createElement("strong",null,"Success!")," ",this.props.message):void 0}},{key:"renderPlan",value:function(){if(this.props.customer.subscriptions){var e=this.props.customer.subscriptions.total_count-1,t=this.props.customer.sources.total_count-1,a=this.props.customer.subscriptions.data[e].plan.id,n=this.props.customer.sources.data[t].last4,r=(this.props.customer.subscriptions.data[e].plan.amount/100).toFixed(2),o=ja.unix(this.props.customer.subscriptions.data[e].current_period_end).format("dddd, MMMM Do YYYY").toString();return this.props.customer.subscriptions.data[e].cancel_at_period_end?c.a.createElement("div",{className:"active-subscription"},"Your ",a," plan will expire on ",o,". You will not be charged again."):c.a.createElement("div",{className:"active-subscription"},"You are subscribed to the ",a," plan. Your credit card ending in ",n," will be charged $",r," on ",o,".",this.renderAccountActions())}return c.a.createElement("div",{className:"loading"},"Loading...")}},{key:"renderAccountActions",value:function(){return this.state.cancelConfirm?c.a.createElement("div",{className:"cancel-confirm"},c.a.createElement("p",null,"Do you really want to cancel your membership to ImproveFit?"),c.a.createElement("div",{className:"action-buttons"},c.a.createElement("button",{className:"btn btn-danger",onClick:this.props.cancelSubscription.bind(this)},"Yes"),c.a.createElement("button",{className:"btn btn-primary",onClick:this.toggleCancelConfirm.bind(this)},"No"))):this.state.changeSubscription?c.a.createElement("div",{className:"action-buttons"},c.a.createElement("select",{className:"form-control",name:"newPlan",value:this.state.newPlan,onChange:this.handlePlanChange.bind(this)},c.a.createElement("option",{value:"bronze"},"Bronze"),c.a.createElement("option",{value:"silver"},"Silver"),c.a.createElement("option",{value:"gold"},"Gold")),c.a.createElement("button",{className:"btn btn-primary",onClick:this.changePlanSubmit.bind(this)},"Change"),c.a.createElement("button",{className:"btn btn-primary",onClick:this.toggleChangeSubscription.bind(this)},"Cancel")):this.state.updateBilling?c.a.createElement("div",{className:"action-buttons"},c.a.createElement(Oa,null),c.a.createElement("button",{className:"btn btn-danger",onClick:this.toggleUpdateBilling.bind(this)},"Cancel")):c.a.createElement("div",{className:"action-buttons"},c.a.createElement("button",{className:"btn btn-primary",onClick:this.toggleChangeSubscription.bind(this)},"Change Subscription"),c.a.createElement("button",{className:"btn btn-info",onClick:this.toggleUpdateBilling.bind(this)},"Update Billing Information"),c.a.createElement("button",{className:"btn btn-danger",onClick:this.toggleCancelConfirm.bind(this)},"Cancel Subscription"))}},{key:"toggleChangeSubscription",value:function(e){e.preventDefault(),this.state.changeSubscription?this.setState({changeSubscription:!1}):this.setState({changeSubscription:!0})}},{key:"toggleCancelConfirm",value:function(e){e.preventDefault(),this.state.cancelConfirm?this.setState({cancelConfirm:!1}):this.setState({cancelConfirm:!0})}},{key:"toggleUpdateBilling",value:function(e){e.preventDefault(),this.state.updateBilling?this.setState({updateBilling:!1}):this.setState({updateBilling:!0})}},{key:"render",value:function(){return c.a.createElement("div",{className:"user-subscription"},this.renderAlert(),this.renderPlan())}}]),t}(o.Component);var ka=Object(l.connect)(function(e){return{customer:e.customer.customer}},r)(wa),Na=function(e){function t(){return Object(f.a)(this,t),Object(v.a)(this,Object(g.a)(t).apply(this,arguments))}return Object(y.a)(t,e),Object(b.a)(t,[{key:"render",value:function(){return c.a.createElement(Oa,{plan:this.props.params.plan})}}]),t}(o.Component),Ca=function(e){function t(){return Object(f.a)(this,t),Object(v.a)(this,Object(g.a)(t).apply(this,arguments))}return Object(y.a)(t,e),Object(b.a)(t,[{key:"render",value:function(){return c.a.createElement("div",null,"Admin navigation goes here.")}}]),t}(o.Component),Sa=c.a.createElement(m.Route,{path:"/",component:w},c.a.createElement(m.IndexRoute,{component:dt}),c.a.createElement(m.Route,{path:"contact-us",component:bt}),c.a.createElement(m.Route,{path:"component-samples",component:k(St)}),c.a.createElement(m.Route,{path:"register",component:Lt}),c.a.createElement(m.Route,{path:"login",component:Mt}),c.a.createElement(m.Route,{path:"logout",component:xt}),c.a.createElement(m.Route,{path:"forgot-password",component:Vt}),c.a.createElement(m.Route,{path:"reset-password/:resetToken",component:Ut}),c.a.createElement(m.Route,{path:"checkout/:plan",component:k(Na)}),c.a.createElement(m.Route,{path:"billing/settings",component:k(ka)}),c.a.createElement(m.Route,{path:"profile",component:k(Kt)}),pt,c.a.createElement(m.Route,{path:"admin",component:k(Ca)}),c.a.createElement(m.Route,{path:"dashboard"},c.a.createElement(m.IndexRoute,{component:k(zt)}),c.a.createElement(m.Route,{path:"inbox",component:k(Zt)}),c.a.createElement(m.Route,{path:"conversation/new",component:k(ha)}),c.a.createElement(m.Route,{path:"conversation/view/:conversationId",component:k(la)})),c.a.createElement(m.Route,{path:"*",component:ht}));function Pa(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,n)}return a}function Ia(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?Pa(a,!0).forEach(function(t){Object(T.a)(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):Pa(a).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}var _a={error:"",message:"",content:"",authenticated:!1};function La(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,n)}return a}function Ta(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?La(a,!0).forEach(function(t){Object(T.a)(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):La(a).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}var Ra={profile:{},message:"",error:""};function Ma(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,n)}return a}function Aa(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?Ma(a,!0).forEach(function(t){Object(T.a)(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):Ma(a).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}var xa={conversations:[],message:"",messages:[],recipients:[],error:""};function Fa(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,n)}return a}function Da(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?Fa(a,!0).forEach(function(t){Object(T.a)(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):Fa(a).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}var Va={message:"",error:"",customer:{}},Ba=a(182),Ya=a.n(Ba),Xa=a(183),Ua=a.n(Xa),Wa=a(184),za=a.n(Wa),Ga=a(185),qa=a.n(Ga);function Ka(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,n)}return a}function Ha(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?Ka(a,!0).forEach(function(t){Object(T.a)(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):Ka(a).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}var $a={message:"",success:!0,playerState:null,worldState:null,design:{GAME:ve.a,ITEMS:Ya.a,SKILLS:Ua.a,LOCATIONS:za.a,CHARACTERS:qa.a}};function Ja(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,n)}return a}function Qa(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?Ja(a,!0).forEach(function(t){Object(T.a)(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):Ja(a).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}var Za={open:!1},en=Object(u.combineReducers)({form:R.b,auth:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:_a,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case x:return Ia({},e,{error:"",message:"",authenticated:!0});case F:return Ia({},e,{authenticated:!1,error:t.payload});case D:return Ia({},e,{error:t.payload});case V:case B:return Ia({},e,{message:t.payload.message});case Y:return Ia({},e,{content:t.payload.message})}return e},user:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ra,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case X:return Ta({},e,{profile:t.payload.user});case"error_reponse":return Ta({},e,{error:t.payload})}return e},communication:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:xa,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case U:return Aa({},e,{conversations:t.payload.conversations});case G:return Aa({},e,{messages:t.payload.conversation});case W:return Aa({},e,{recipients:t.payload.recipients});case z:case K:case H:return Aa({},e,{message:t.payload.message});case q:return Aa({},e,{error:t.payload})}return e},customer:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Va,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case J:return Da({},e,{message:t.payload.message});case Q:return Da({},e,{customer:t.payload.customer});case Z:case ae:case ee:return Da({},e,{message:t.payload.message});case te:return Da({},e,{error:t.payload})}return e},game:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:$a,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"update_game":return Ha({},e,{playerState:t.playerState,worldState:t.worldState});case ne:return Ha({},e,{success:!1,error:t.payload});case re:return Ha({},e,{message:t.payload.message});case"set_kingdom":return Ha({},e,{kingdom:t.payload.user.kingdom});case pe:return Ha({},e,{family:t.payload.user.family});case me:return Ha({},e,{player:t.payload.user.currentCharacter});case he:return Ha({},e,{game:t.payload.user.game})}return e},eventState:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Za,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case ce:return Qa({},e,{open:!1});case ie:return Qa({},e,{open:!0,mode:"analyze"},t.eventState);case oe:return Qa({},e,{open:!0,mode:"result"},t.payload.eventState);case le:return Qa({},e,{open:!0,mode:"review"},t.eventState);case ue:return Qa({},e,{},t.eventState)}return e}}),tn=a(111),an=a.n(tn),nn=a(186),rn=(a(368),a(369),Object(nn.createLogger)({predicate:function(e,t){return"update_game"!==t.type}}));an.a.initialize("UA-000000-01");var on=Object(u.applyMiddleware)(rn,p.a)(u.createStore)(en),cn=d.a.load("token"),sn=d.a.load("user");cn&&sn&&(on.dispatch({type:x}),on.dispatch(je()),fe.emit("authenticate",cn).on("authenticated",function(){fe.authenticated=!0,console.log("socket authorized, joining game"),fe.on("update game",function(e,t){on.dispatch({type:"update_game",playerState:e,worldState:t})})}).on("unauthorized",function(){console.error("token not authorized via socket")})),i.a.render(c.a.createElement(l.Provider,{store:on},c.a.createElement(m.Router,{history:m.browserHistory,routes:Sa,onUpdate:function(){an.a.pageview(window.location.pathname)}})),document.querySelector(".wrapper"))},75:function(e,t){e.exports={SPEED:10,id:"5934b6be1aa8f440c4ae72fa"}}},[[187,1,2]]]);
//# sourceMappingURL=main.2172a360.chunk.js.map